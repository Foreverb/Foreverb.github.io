<!DOCTYPE html>
<html>
  <!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  
  <title>硬连接和软连接 undefined Cooper Yang</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  
  <meta name="keywords" content=Linux,shell,文件系统>
  
  
  

  <link rel="stylesheet" href="/css/style.css?v=1.06">
  </head>

  <body>
    <div class="container">
      <header class="header">
  <nav class="navbar">
    <div class="menu">
      <div class="menu-item">
      
      </div>
    </div>

    <div class="menu">
      <div class="menu-item">
      
      
        <a href="javascript:void(0)" class="menu-item-link search">搜索</a>
      
      </div>
    </div>
  </nav>
</header>


<div class="holder">&nbsp;</div>
<div class="info">
  <a class="site-title" href=/>Cooper Yang</a>
  
  <div class="subtitle">
    A FrontEnd Engineer
  </div>
  
</div>



<article class="post">
  <div class="post-title">
    <h1 class="article-title">硬连接和软连接</h1>
  </div>
   <div class="post-meta">
    <span class="post-time">2017-07-06</span>
  </div>
  <div class="post-content">
    <h1 id="Inode"><a href="#Inode" class="headerlink" title="Inode"></a>Inode</h1><ol>
<li>inode（即索引节点号）是Linux系统识别文件的唯一标识。</li>
<li>系统是通过inode来查找正确的文件数据块，并不是通过文件名。</li>
</ol>
<h4 id="Linux系统中文件数据分为两类：metadata（元数据）和data（普通数据）。"><a href="#Linux系统中文件数据分为两类：metadata（元数据）和data（普通数据）。" class="headerlink" title="Linux系统中文件数据分为两类：metadata（元数据）和data（普通数据）。"></a>Linux系统中文件数据分为两类：metadata（元数据）和data（普通数据）。</h4><p>元数据存放的是文件的附加属性，例如大小、时间戳、所有者等。普通数据才是真正的数据内容。</p>
<h1 id="硬链接和软链接"><a href="#硬链接和软链接" class="headerlink" title="硬链接和软链接"></a>硬链接和软链接</h1><p>在Linux系统为了解决文件共享问题，使用两种方式：hard link（硬链接）和soft link（软链接），链接不仅仅可以共享文件，还有方便管理、隐藏路径、节省空间等好处。</p>
<h2 id="硬链接"><a href="#硬链接" class="headerlink" title="硬链接"></a>硬链接</h2><h3 id="若是使用同一个inode对应多个文件，则使用的就是硬链接。"><a href="#若是使用同一个inode对应多个文件，则使用的就是硬链接。" class="headerlink" title="若是使用同一个inode对应多个文件，则使用的就是硬链接。"></a>若是使用同一个inode对应多个文件，则使用的就是硬链接。</h3><p>硬链接可以使用link和ln创建</p>
<p>语法：ln filename [linkname ]</p>
<p>示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">link data link</span><br><span class="line">ln data link</span><br></pre></td></tr></table></figure>
<ol>
<li>只能和已存在的文件建立硬链接</li>
</ol>
<h4 id="我们在-app目录下进行实验，当硬链接的源文件不存在时，硬链接无法创建"><a href="#我们在-app目录下进行实验，当硬链接的源文件不存在时，硬链接无法创建" class="headerlink" title="我们在/app目录下进行实验，当硬链接的源文件不存在时，硬链接无法创建"></a>我们在/app目录下进行实验，当硬链接的源文件不存在时，硬链接无法创建</h4><ol start="2">
<li>文件的inode相同和文件属性，只是文件名不同</li>
</ol>
<h4 id="我们在-app目录下创建一个data的源文件，并通过stat-命令查看文件属性，然后创建硬链接link，ll-i-查看两者的inode相同，从ctime的变化也能确定硬链接就是用一个文件"><a href="#我们在-app目录下创建一个data的源文件，并通过stat-命令查看文件属性，然后创建硬链接link，ll-i-查看两者的inode相同，从ctime的变化也能确定硬链接就是用一个文件" class="headerlink" title="我们在/app目录下创建一个data的源文件，并通过stat 命令查看文件属性，然后创建硬链接link，ll -i 查看两者的inode相同，从ctime的变化也能确定硬链接就是用一个文件"></a>我们在/app目录下创建一个data的源文件，并通过stat 命令查看文件属性，然后创建硬链接link，ll -i 查看两者的inode相同，从ctime的变化也能确定硬链接就是用一个文件</h4><ol start="3">
<li>不能跨文件系统建立硬链接</li>
</ol>
<h4 id="在-dev目录下建立硬链接link，因为所在不同的文件系统，所以不能建立硬链接"><a href="#在-dev目录下建立硬链接link，因为所在不同的文件系统，所以不能建立硬链接" class="headerlink" title="在/dev目录下建立硬链接link，因为所在不同的文件系统，所以不能建立硬链接"></a>在/dev目录下建立硬链接link，因为所在不同的文件系统，所以不能建立硬链接</h4><ol start="4">
<li>硬链接创建后链接数会增加</li>
</ol>
<h4 id="我们通过对link和data建立新的硬链接link2和link3，发现链数都有增长，由此也能看出硬链接实质上就是同一个文件"><a href="#我们通过对link和data建立新的硬链接link2和link3，发现链数都有增长，由此也能看出硬链接实质上就是同一个文件" class="headerlink" title="我们通过对link和data建立新的硬链接link2和link3，发现链数都有增长，由此也能看出硬链接实质上就是同一个文件"></a>我们通过对link和data建立新的硬链接link2和link3，发现链数都有增长，由此也能看出硬链接实质上就是同一个文件</h4><ol start="5">
<li>不能对目录创建硬链接</li>
</ol>
<h4 id="在-app目录下创建dir1目录文件，尝试建立硬链接link4，创建失败。因为硬链接能针对目录创建"><a href="#在-app目录下创建dir1目录文件，尝试建立硬链接link4，创建失败。因为硬链接能针对目录创建" class="headerlink" title="在/app目录下创建dir1目录文件，尝试建立硬链接link4，创建失败。因为硬链接能针对目录创建"></a>在/app目录下创建dir1目录文件，尝试建立硬链接link4，创建失败。因为硬链接能针对目录创建</h4><ol start="6">
<li>删除一个硬链接文件并不影响其他有相同 inode 号的文件数据</li>
</ol>
<h4 id="在删除源文件data的之前，查看源文件和链接文件的数据是一致的。在删除data之后，其他的硬链接文件的内容不受影响，只是链接数减少了"><a href="#在删除源文件data的之前，查看源文件和链接文件的数据是一致的。在删除data之后，其他的硬链接文件的内容不受影响，只是链接数减少了" class="headerlink" title="在删除源文件data的之前，查看源文件和链接文件的数据是一致的。在删除data之后，其他的硬链接文件的内容不受影响，只是链接数减少了"></a>在删除源文件data的之前，查看源文件和链接文件的数据是一致的。在删除data之后，其他的硬链接文件的内容不受影响，只是链接数减少了</h4><h1 id="软链接"><a href="#软链接" class="headerlink" title="软链接"></a>软链接</h1><h2 id="软链接的特性"><a href="#软链接的特性" class="headerlink" title="软链接的特性"></a>软链接的特性</h2><ol>
<li><p>软链接其实存放的就是源文件的路径，所以如果文件的内容数据是另一个文件的路径时，这个文件就是软链接。</p>
</li>
<li><p>软链接有自己独立的inode和文件属性，这点和硬链接有本质的区别</p>
</li>
</ol>
<p>语法：ln -s filename [linkname ]</p>
<p>示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">link -s data link</span><br><span class="line">ln -s data link</span><br></pre></td></tr></table></figure>
<ol>
<li>软链接可对不存在文件建立链接</li>
</ol>
<h4 id="在-app的空目录中，建立软链接，目录下没有文件，但链接依旧能建立，找不到目标文件会有报错提示"><a href="#在-app的空目录中，建立软链接，目录下没有文件，但链接依旧能建立，找不到目标文件会有报错提示" class="headerlink" title="在/app的空目录中，建立软链接，目录下没有文件，但链接依旧能建立，找不到目标文件会有报错提示"></a>在/app的空目录中，建立软链接，目录下没有文件，但链接依旧能建立，找不到目标文件会有报错提示</h4><ol start="2">
<li>软链接有自己的inode和属性</li>
</ol>
<h4 id="在目录下建立文件soft，之后对soft设置软链接slink，通过stat-命令查看soft和slink的文件属性，可以看出和之前硬链接的本质区别，不论是权限、inode、时间戳、大小、数据块都不同"><a href="#在目录下建立文件soft，之后对soft设置软链接slink，通过stat-命令查看soft和slink的文件属性，可以看出和之前硬链接的本质区别，不论是权限、inode、时间戳、大小、数据块都不同" class="headerlink" title="在目录下建立文件soft，之后对soft设置软链接slink，通过stat 命令查看soft和slink的文件属性，可以看出和之前硬链接的本质区别，不论是权限、inode、时间戳、大小、数据块都不同"></a>在目录下建立文件soft，之后对soft设置软链接slink，通过stat 命令查看soft和slink的文件属性，可以看出和之前硬链接的本质区别，不论是权限、inode、时间戳、大小、数据块都不同</h4><ol start="3">
<li>软链接可跨文件系统建立</li>
</ol>
<h4 id="在-dev目录下建立test文件目录用于实验，然后设置软链接testlink"><a href="#在-dev目录下建立test文件目录用于实验，然后设置软链接testlink" class="headerlink" title="在/dev目录下建立test文件目录用于实验，然后设置软链接testlink"></a>在/dev目录下建立test文件目录用于实验，然后设置软链接testlink</h4><ol start="4">
<li>软链接可以对目录文件建立</li>
</ol>
<h4 id="接着直接以-app-testdir为目标文件，和-dev-test目录文件，建立软链接"><a href="#接着直接以-app-testdir为目标文件，和-dev-test目录文件，建立软链接" class="headerlink" title="接着直接以/app/testdir为目标文件，和/dev/test目录文件，建立软链接"></a>接着直接以/app/testdir为目标文件，和/dev/test目录文件，建立软链接</h4><ol start="5">
<li>软链接创建不会增加链接数</li>
</ol>
<h4 id="建立了软链接，而链接数还是1没有改变"><a href="#建立了软链接，而链接数还是1没有改变" class="headerlink" title="建立了软链接，而链接数还是1没有改变"></a>建立了软链接，而链接数还是1没有改变</h4><ol start="6">
<li>删除软链接并不影响源文件，但删除源文件软链接就会变成死链接，若链接指向的路径文件被重新建立，则链接恢复</li>
</ol>
<h4 id="在-app目录下再创创建一个软链接slink2，在我们删除slink之后，源文件soft和slink2都没有受到影响，但当我们把soft文件删除后，slink2就变成了死链接，不再能显示数据"><a href="#在-app目录下再创创建一个软链接slink2，在我们删除slink之后，源文件soft和slink2都没有受到影响，但当我们把soft文件删除后，slink2就变成了死链接，不再能显示数据" class="headerlink" title="在/app目录下再创创建一个软链接slink2，在我们删除slink之后，源文件soft和slink2都没有受到影响，但当我们把soft文件删除后，slink2就变成了死链接，不再能显示数据"></a>在/app目录下再创创建一个软链接slink2，在我们删除slink之后，源文件soft和slink2都没有受到影响，但当我们把soft文件删除后，slink2就变成了死链接，不再能显示数据</h4><h2 id="其他相关命令"><a href="#其他相关命令" class="headerlink" title="其他相关命令"></a>其他相关命令</h2><p>使用find 命令可以查找链接文件</p>
<ol>
<li>查找目录文件下相同inode的文件</li>
</ol>
<h4 id="find-dirs-inum-inode"><a href="#find-dirs-inum-inode" class="headerlink" title="find /dirs inum inode"></a>find /dirs inum inode</h4><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>硬链接本质上就是同一个文件的不同文件名。软链接就是独立的文件，不过文件中存放的是源文件的路径。</p>

  </div>
  <div class="post-footer">
    
      <ul class="post-tag-list"><li class="post-tag-list-item"><a class="post-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="post-tag-list-item"><a class="post-tag-list-link" href="/tags/shell/">shell</a></li><li class="post-tag-list-item"><a class="post-tag-list-link" href="/tags/文件系统/">文件系统</a></li></ul>
    

    <div class="arrow-top">↑</div>
  </div>
</article>


  <div class="search-mask">
    <div class="search-dialog">
        <div class="search-title">
          搜索
          <div class="close">×</div>
        </div>
        <input type="text" autocomplete="off"
               name="search" placeholder="Search for Posts" id="local-search-input">
        <span class="down">↓</span>
        <hr />
        <div id="local-search-result">
          <ul class="archive">
          
          
              <li>
                <a class="archive-title" href="/2017/11/14/hexo的原理/">hexo的原理</a>
                <time class="archive-date">2017-11-14</time>
              </li>
          
              <li>
                <a class="archive-title" href="/2017/11/13/项目功能模块开发流程/">项目功能模块开发流程</a>
                <time class="archive-date">2017-11-13</time>
              </li>
          
              <li>
                <a class="archive-title" href="/2017/11/10/ubb表情逻辑/">js模拟UBB表情发送</a>
                <time class="archive-date">2017-11-10</time>
              </li>
          
              <li>
                <a class="archive-title" href="/2017/11/02/深入了解call,bind,apply原理/">深入理解 call，apply 和 bind</a>
                <time class="archive-date">2017-11-02</time>
              </li>
          
              <li>
                <a class="archive-title" href="/2017/11/01/node自动重启工具/">Node自动重启工具 nodemon</a>
                <time class="archive-date">2017-11-01</time>
              </li>
          
              <li>
                <a class="archive-title" href="/2017/10/31/Promise的基本用法/">Promise 的基础用法</a>
                <time class="archive-date">2017-10-31</time>
              </li>
          
              <li>
                <a class="archive-title" href="/2017/10/30/git常用命令/">git 常用命令</a>
                <time class="archive-date">2017-10-30</time>
              </li>
          
              <li>
                <a class="archive-title" href="/2017/10/29/git创建，查看，删除，切换分支/">git 创建、查看、删除、切换分支问题</a>
                <time class="archive-date">2017-10-29</time>
              </li>
          
              <li>
                <a class="archive-title" href="/2017/10/16/js获取光标位置/">js获取光标位置</a>
                <time class="archive-date">2017-10-16</time>
              </li>
          
              <li>
                <a class="archive-title" href="/2017/07/20/初级前端必知/">初级前端必学</a>
                <time class="archive-date">2017-07-20</time>
              </li>
          
              <li>
                <a class="archive-title" href="/2017/07/06/箭头函数/">箭头函数</a>
                <time class="archive-date">2017-07-06</time>
              </li>
          
              <li>
                <a class="archive-title" href="/2017/07/06/20180706-硬连接和软连接/">硬连接和软连接</a>
                <time class="archive-date">2017-07-06</time>
              </li>
          
              <li>
                <a class="archive-title" href="/2017/07/05/20180705-开源前端面试题/">前端求职面试问题</a>
                <time class="archive-date">2017-07-05</time>
              </li>
          
          </ul>
          
            <div class="top">↑</div>
          
        </div>
    </div>
  </div>

<footer>
  <div class="footer-container">
    <div>
      Powered by <a href="https://github.com/chunqiuyiyu/hexo-theme-samljen">Samljen</a> ❤ Thanks to <a href="https://hexo.io/">Hexo</a> & <a href="https://choo.io/">Choo</a>
    </div>
    <div>
      &copy; 2018
      <a class="author" href='/'>
        Cooper Yang
      </a>. All Right Reserved. 
    </div>
  </div>
</footer>
<script src="/js/utils.js"></script>


    </div>
  </body>
</html>